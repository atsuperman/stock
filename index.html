<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stock Calculator</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: Consolas, 'Courier New', monospace;
        }
        
        body {
            background-color: #0c0c0c;
            color: #cccccc;
            min-height: 100vh;
            padding: 10px;
            overflow-x: hidden;
        }
        
        .container {
            max-width: 100%;
            margin: 0 auto;
            padding: 0;
        }
        
        .terminal-output {
            background-color: #0c0c0c;
            border: 1px solid #3c3c3c;
            border-radius: 4px;
            padding: 15px;
            margin-bottom: 15px;
            font-family: Consolas, monospace;
            font-size: 14px;
            line-height: 1.4;
            max-height: 250px;
            overflow-y: auto;
        }
        
        .terminal-line {
            margin-bottom: 5px;
            display: flex;
            justify-content: space-between;
        }
        
        .terminal-label {
            color: #00ff00;
        }
        
        .terminal-value {
            color: #ffffff;
            font-weight: bold;
        }
        
        .terminal-value.profit {
            color: #00ff00;
        }
        
        .terminal-value.loss {
            color: #ff5555;
        }
        
        .input-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 12px;
            margin-bottom: 15px;
        }
        
        .input-group {
            display: flex;
            flex-direction: column;
        }
        
        label {
            font-size: 12px;
            color: #aaaaaa;
            margin-bottom: 4px;
            display: flex;
            align-items: center;
        }
        
        label i {
            margin-right: 6px;
            color: #00aaff;
        }
        
        input[type="number"] {
            background-color: #1a1a1a;
            border: 1px solid #333333;
            color: #ffffff;
            padding: 10px;
            border-radius: 4px;
            font-size: 14px;
            font-family: Consolas, monospace;
            width: 100%;
        }
        
        input[type="number"]:focus {
            outline: none;
            border-color: #00aaff;
        }
        
        .percentage-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 10px;
            margin-bottom: 15px;
        }
        
        .percent-btn {
            flex: 1;
            min-width: 60px;
            background-color: #1a1a1a;
            border: 1px solid #333333;
            color: #cccccc;
            padding: 8px 5px;
            border-radius: 4px;
            font-size: 13px;
            font-family: Consolas, monospace;
            cursor: pointer;
            text-align: center;
        }
        
        .percent-btn:hover {
            background-color: #252525;
        }
        
        .percent-btn.active {
            background-color: #004466;
            border-color: #00aaff;
            color: #ffffff;
        }
        
        .result-summary {
            background-color: #1a1a1a;
            border: 1px solid #333333;
            border-radius: 4px;
            padding: 15px;
            margin-top: 10px;
        }
        
        .result-line {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 14px;
        }
        
        .result-label {
            color: #aaaaaa;
        }
        
        .result-number {
            color: #ffffff;
            font-weight: bold;
        }
        
        .result-number.profit {
            color: #00ff00;
        }
        
        .result-number.loss {
            color: #ff5555;
        }
        
        .footer-note {
            font-size: 11px;
            color: #666666;
            text-align: center;
            margin-top: 15px;
            padding-top: 10px;
            border-top: 1px solid #333333;
        }
        
        @media (max-width: 768px) {
            .input-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .terminal-output {
                font-size: 13px;
                max-height: 200px;
            }
        }
        
        @media (max-width: 480px) {
            .input-grid {
                grid-template-columns: 1fr;
            }
            
            .percent-btn {
                min-width: calc(33.333% - 6px);
            }
            
            body {
                padding: 8px;
            }
        }
        
        /* Scrollbar styling */
        .terminal-output::-webkit-scrollbar {
            width: 8px;
        }
        
        .terminal-output::-webkit-scrollbar-track {
            background: #1a1a1a;
        }
        
        .terminal-output::-webkit-scrollbar-thumb {
            background: #333333;
            border-radius: 4px;
        }
        
        .terminal-output::-webkit-scrollbar-thumb:hover {
            background: #444444;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="terminal-output" id="terminalOutput">
            <!-- Terminal output will be generated here -->
        </div>
        
        <div class="input-grid">
            <div class="input-group">
                <label for="currentMarketPrice"><i class="fas fa-tag"></i> Market Price (₹)</label>
                <input type="number" id="currentMarketPrice" value="127.30" step="0.01" min="0">
            </div>
            
            <div class="input-group">
                <label for="purchasePercentage"><i class="fas fa-arrow-up"></i> Purchase % Inc.</label>
                <input type="number" id="purchasePercentage" value="0.16" step="0.01">
            </div>
            
            <div class="input-group">
                <label for="marketPercentage"><i class="fas fa-chart-bar"></i> Market % Inc.</label>
                <input type="number" id="marketPercentage" value="0.20" step="0.01">
            </div>
            
            <div class="input-group">
                <label for="shares"><i class="fas fa-layer-group"></i> Shares</label>
                <input type="number" id="shares" value="100" min="1" step="1">
            </div>
        </div>
        
        <div class="input-group">
            <label for="futureChange"><i class="fas fa-calculator"></i> Expected % Change</label>
            <input type="number" id="futureChange" value="5" step="0.1">
            
            <div class="percentage-buttons">
                <button class="percent-btn" data-value="-10">-10%</button>
                <button class="percent-btn" data-value="-5">-5%</button>
                <button class="percent-btn active" data-value="0">0%</button>
                <button class="percent-btn" data-value="5">+5%</button>
                <button class="percent-btn" data-value="10">+10%</button>
                <button class="percent-btn" data-value="15">+15%</button>
            </div>
        </div>
        
        <div class="result-summary">
            <div class="result-line">
                <span class="result-label">Base Price:</span>
                <span id="basePriceResult" class="result-number">₹0.00</span>
            </div>
            <div class="result-line">
                <span class="result-label">Purchase Price:</span>
                <span id="purchasePriceResult" class="result-number">₹0.00</span>
            </div>
            <div class="result-line">
                <span class="result-label">Future Price:</span>
                <span id="futurePriceResult" class="result-number">₹0.00</span>
            </div>
            <div class="result-line">
                <span class="result-label">Total Investment:</span>
                <span id="totalInvestmentResult" class="result-number">₹0.00</span>
            </div>
            <div class="result-line">
                <span class="result-label">Future Value:</span>
                <span id="futureValueResult" class="result-number">₹0.00</span>
            </div>
            <div class="result-line">
                <span class="result-label">Profit/Loss:</span>
                <span id="profitLossResult" class="result-number">₹0.00</span>
            </div>
        </div>
        
        <div class="footer-note">
            Calculations update in real-time
        </div>
    </div>

    <script>
        // DOM Elements
        const currentMarketPriceInput = document.getElementById('currentMarketPrice');
        const purchasePercentageInput = document.getElementById('purchasePercentage');
        const marketPercentageInput = document.getElementById('marketPercentage');
        const sharesInput = document.getElementById('shares');
        const futureChangeInput = document.getElementById('futureChange');
        const terminalOutput = document.getElementById('terminalOutput');
        const percentButtons = document.querySelectorAll('.percent-btn');
        
        // Result elements
        const basePriceResult = document.getElementById('basePriceResult');
        const purchasePriceResult = document.getElementById('purchasePriceResult');
        const futurePriceResult = document.getElementById('futurePriceResult');
        const totalInvestmentResult = document.getElementById('totalInvestmentResult');
        const futureValueResult = document.getElementById('futureValueResult');
        const profitLossResult = document.getElementById('profitLossResult');
        
        // Format currency
        function formatCurrency(amount) {
            return '₹' + amount.toFixed(2);
        }
        
        // Format percentage
        function formatPercentage(value) {
            const sign = value >= 0 ? '+' : '';
            return sign + value.toFixed(2) + '%';
        }
        
        // Update terminal display
        function updateTerminal(basePrice, purchasePrice, futurePrice, totalInvestment, futureValue, profitLoss, profitLossPercent) {
            let terminalHTML = '';
            
            terminalHTML += '<div class="terminal-line">';
            terminalHTML += '<span class="terminal-label">BASE_PRICE:</span>';
            terminalHTML += `<span class="terminal-value">${formatCurrency(basePrice)}</span>`;
            terminalHTML += '</div>';
            
            terminalHTML += '<div class="terminal-line">';
            terminalHTML += '<span class="terminal-label">PURCHASE_PRICE:</span>';
            terminalHTML += `<span class="terminal-value">${formatCurrency(purchasePrice)}</span>`;
            terminalHTML += '</div>';
            
            terminalHTML += '<div class="terminal-line">';
            terminalHTML += '<span class="terminal-label">FUTURE_PRICE:</span>';
            terminalHTML += `<span class="terminal-value">${formatCurrency(futurePrice)}</span>`;
            terminalHTML += '</div>';
            
            terminalHTML += '<div class="terminal-line">';
            terminalHTML += '<span class="terminal-label">TOTAL_INVESTMENT:</span>';
            terminalHTML += `<span class="terminal-value">${formatCurrency(totalInvestment)}</span>`;
            terminalHTML += '</div>';
            
            terminalHTML += '<div class="terminal-line">';
            terminalHTML += '<span class="terminal-label">FUTURE_VALUE:</span>';
            terminalHTML += `<span class="terminal-value">${formatCurrency(futureValue)}</span>`;
            terminalHTML += '</div>';
            
            terminalHTML += '<div class="terminal-line">';
            terminalHTML += '<span class="terminal-label">PROFIT_LOSS:</span>';
            terminalHTML += `<span class="terminal-value ${profitLoss >= 0 ? 'profit' : 'loss'}">${formatCurrency(profitLoss)}</span>`;
            terminalHTML += '</div>';
            
            terminalHTML += '<div class="terminal-line">';
            terminalHTML += '<span class="terminal-label">PROFIT_LOSS_PERCENT:</span>';
            terminalHTML += `<span class="terminal-value ${profitLoss >= 0 ? 'profit' : 'loss'}">${formatPercentage(profitLossPercent)}</span>`;
            terminalHTML += '</div>';
            
            terminalOutput.innerHTML = terminalHTML;
        }
        
        // Calculate all values
        function calculateAll() {
            // Get input values
            const currentMarketPrice = parseFloat(currentMarketPriceInput.value) || 0;
            const purchasePercentage = parseFloat(purchasePercentageInput.value) || 0;
            const marketPercentage = parseFloat(marketPercentageInput.value) || 0;
            const shares = parseInt(sharesInput.value) || 0;
            const futureChange = parseFloat(futureChangeInput.value) || 0;
            
            // Calculate base price (price before any increase)
            const basePrice = currentMarketPrice / (1 + marketPercentage/100);
            
            // Calculate purchase price (price at which user purchased)
            const purchasePrice = basePrice * (1 + purchasePercentage/100);
            
            // Calculate future expected price
            const futurePrice = currentMarketPrice * (1 + futureChange/100);
            
            // Calculate investment and values
            const totalInvestment = purchasePrice * shares;
            const futureValue = futurePrice * shares;
            const profitLoss = futureValue - totalInvestment;
            const profitLossPercentage = (profitLoss / totalInvestment) * 100;
            
            // Update terminal display
            updateTerminal(basePrice, purchasePrice, futurePrice, totalInvestment, futureValue, profitLoss, profitLossPercentage);
            
            // Update result summary
            basePriceResult.textContent = formatCurrency(basePrice);
            purchasePriceResult.textContent = formatCurrency(purchasePrice);
            futurePriceResult.textContent = formatCurrency(futurePrice);
            totalInvestmentResult.textContent = formatCurrency(totalInvestment);
            futureValueResult.textContent = formatCurrency(futureValue);
            profitLossResult.textContent = formatCurrency(profitLoss);
            
            // Color code profit/loss
            if (profitLoss >= 0) {
                profitLossResult.className = 'result-number profit';
            } else {
                profitLossResult.className = 'result-number loss';
            }
        }
        
        // Set active percentage button
        function setActivePercentageButton(value) {
            percentButtons.forEach(button => {
                if (parseFloat(button.getAttribute('data-value')) === value) {
                    button.classList.add('active');
                } else {
                    button.classList.remove('active');
                }
            });
        }
        
        // Event Listeners
        currentMarketPriceInput.addEventListener('input', calculateAll);
        purchasePercentageInput.addEventListener('input', calculateAll);
        marketPercentageInput.addEventListener('input', calculateAll);
        sharesInput.addEventListener('input', calculateAll);
        
        futureChangeInput.addEventListener('input', function() {
            const value = parseFloat(this.value);
            setActivePercentageButton(value);
            calculateAll();
        });
        
        // Percentage buttons event listeners
        percentButtons.forEach(button => {
            button.addEventListener('click', function() {
                const value = parseFloat(this.getAttribute('data-value'));
                futureChangeInput.value = value;
                setActivePercentageButton(value);
                calculateAll();
            });
        });
        
        // Initialize calculation on page load
        document.addEventListener('DOMContentLoaded', function() {
            calculateAll();
            setActivePercentageButton(0);
        });
        
        // Add input validation
        sharesInput.addEventListener('change', function() {
            if (this.value < 1) this.value = 1;
            calculateAll();
        });
        
        currentMarketPriceInput.addEventListener('change', function() {
            if (this.value < 0) this.value = 0;
            calculateAll();
        });
        
        // Auto-scroll terminal to bottom
        function scrollTerminalToBottom() {
            terminalOutput.scrollTop = terminalOutput.scrollHeight;
        }
        
        // Scroll terminal when updating
        const originalUpdateTerminal = updateTerminal;
        updateTerminal = function(...args) {
            originalUpdateTerminal.apply(this, args);
            setTimeout(scrollTerminalToBottom, 10);
        };
    </script>
</body>
</html>
